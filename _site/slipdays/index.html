<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Check Your Slip Days!</title>
  <meta name="description" content="computer science class designed for anyone and everyone. The Beauty and Joy of Computing is an AP Computer Science Principles class.
">

  <!-- <link rel="stylesheet" href="/su17assets/css/main.css"> -->
  <link rel="canonical" href="http://localhost:4000/su17/slipdays/">

  <link rel="icon" href="/su17/assets/favicon.png" type="image/png">

  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="/su17/assets/css/bootstrap33.min.css">

  <link href="/su17/assets/css/cs10style.css" rel="stylesheet"/>

  <style type="text/css">
      body {
  font-family: 'Helvetica'; /* override bootstrap */
  width: 95%;
  font-size: 15px; /* Don't use pts: it makes the recursion text ugly */
  max-width: 2000px;
  margin: 1em auto;
  padding: 0 .3em .3em .3em;
}

h1 {
  display: block;
  background: #003A70;
  background: -moz-linear-gradient(top, #003A70 0%, #3f7dc2 50%, #003A70 100%); /* FF3.6+ */
  background: -webkit-linear-gradient(top, #003A70 0%, #3f7dc2 50%,#003A70 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #003A70 q%, #3f7dc2 50%, #003A70 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #003A70 0%, #3f7dc2 50%, #003A70 100%); /* IE10+ */
  background: linear-gradient(top, #003A70 0%, #3f7dc2 50%, #003A70 100%); /* W3C */
  border-radius: 2em;
  box-shadow: 2px 3px 6px #606060;
  padding: .3em 1em;
  color: #FFF;
  font-size: 1.6em;
  text-shadow: 1px 1px 2px #555;
  vertical-align: middle;
}

.logo {
  font-size: 2.25em;
  margin: .1em;
  vertical-align: middle;
}

.header {
  display: inline-block;
  width: 100%;
}
.header, .header > div {
  display: inline-block;
  vertical-align: middle;
}

.left {
  width: 250px;
}

.right {
  text-align: right;
  min-width: 100px;
  width: 17%;
  max-width: 250px;
}
  </style>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47210910-1', 'auto');
  ga('send', 'pageview');
  </script>
</head>


  <body>

    <a href="/su17/">
  <h2 class="logo">CS10 Spring 2017</h2>
  <h2 class="logo">The Beauty and Joy of Computing</h2>
</a>


<h1 id="quicklinks">Quick Links</h1>
<ul>
  <li><a target="_blank" href="https://snap.berkeley.edu/run/">Snap</a></li>
  <li><a target="_blank" href="https://piazza.com/berkeley/spring2017/cs10/home">Piazza</a></li>
  <li><a target="_blank" href="http://beautyjoy.github.io/bjc-r/course/cs10_sp17.html">Labs</a></li>
  <li><a target="_blank" href="https://bcourses.berkeley.edu/courses/1458271">bCourses</a></li>
  <li><a target="_blank" href="http://webcast.berkeley.edu/playlist#c,s,Fall_2014,-XXv-cvA_iCajFbSJ4q3ApmKtT7RL3wQ">Past Webcasts</a></li>
  <li><a href="/su17/assign.html?https://docs.google.com/document/d/1rsaHFxL6cfUWeFwr9mzc8YLXNNXWnt-XD0iFsHfbOcM//pub">Course Policies</a></li>
  <li><a href="/su17/labquestions/">Lab Check-Off Questions</a></li>
  <li><a href="/su17/resources/exams/">Practice Exams</a></li>
</ul>
<div class="clearfix"></div>


<script src="/su17/assets/directory-concat.js"></script>

<link href="/su17/assets/css/cs10style.css" rel="stylesheet"/>

<script>
    // Maps days since **saturday** to the appropriate cell numbers
// Its value is the cell numbers to deal with.
// The file dynamically calculates days for the semester and doesn't read
// dates from specific cells.
var since = [
    [2],       // 0 days -- Sun: readings
    [3, 4],    // 1 day  -- Mon: lec lab 1
    [4],       // 2 days -- Tues: lab 1
    [5],       // 3 days -- Wed: lab 1, lec2, lab 2
    [6],       // 4 days -- thurs: lab 2
    [6, 7],    // 5 days -- fri: lab 2, disc, hw
    [2],       // 6 days -- Sat: readings
];

var STYLE  = "8px solid Gold";
var MS_DAY = 1000*60*60*24;

// Function used to highlight the current day.
// TODO: Fix this stuff to be a moment obj.
function updateCalendar(startDate, date) {
    console.log('CALLED');
    // The SATURDAY before the first week of the calendar.
    var start = startDate || new Date(),
        today = date || new Date(),
        highlight = since[ today.getDay() ],
        weeks = Math.floor(((today - start) / MS_DAY) / 7); // Weeks SINCE start
    // if (highlight[0] === 2) {
    //     weeks += 1; // really shitty hack for weekends....
    // }
    var c, i, j, // holy shit that's terrible. FIXME.
        rows = document.querySelectorAll("tbody > tr.cal"),
        temp = rows[weeks],
        cells;
    // Date is out of range of calendar
    if (typeof temp === 'undefined') {
        console.log('DATE OUT OF RANGE');
        return;
    }
    cells = temp.cells;
    if (today.getDay() === 3) { // HIGHLIGHT LAB ON WEDS BASED ON TIME OF DAY
        var n = (today.getHours() < 12) ? 4 : 6;
        highlight.push(n);
    }
    // Hack for weeks like spring break, deadweek
    // Not a robust hack, but it should work OK.
    c = (cells.length == 5) ? 3 : highlight[0];
    cells[c].style.border = STYLE;
    if (c === 2 & weeks >= 2) { // HW, in the row before
        // CANT USE 8 BECAUSE ALL WEEKS ARENT THE SAME DARNIT.
        prev = rows[weeks].cells;
        rows[weeks].cells[prev.length - 1].style.border = STYLE;
    }
    if (highlight[1] && cells.length > highlight[1]) {
        cells[highlight[1]].style.border = STYLE;
    }
    // Grey out cells that have past
    for(i = 0; i < rows.length; i += 1) {
        cells = rows[i].cells;
        for(j = 2; j < cells.length; j += 1) {
            if (cells[j].style.border) { return; }
            cells[j].style.background = "#BBB";
            // Go 1 level deep to change the background on inner divs.
            // FIXME: Banish the jQuery? or make this recursive... or
            // not because I would ever need it? But it might be fun...
            if (typeof $ !== 'undefined') {
                if ($(cells[j]).has('div')) {
                    $(cells[j]).children().css('background', '#BBB');
                }
            }
        }
    }
}

function displaySpeech(img_name, img_src) {
    document[img_name].src = img_src;
}


</script>

<h1>Check Your Slip Day Usage</h1>

<div class="page-section">
  <br>
  <h2>Please enter your SID</h2>
  <form class="form-inline" id='sid-form'>
    <div class="form-group">
      <label class="sr-only" for="exampleInputAmount">Your SID</label>
      <div class="input-group">
        <input type="text" class="form-control" id="sidInput" placeholder="12345678">
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Check my days!</button>
  </form>
  <br />
  <br />
  <div id="msg" class="alert hidden" role="alert">
  </div>
  <br />
  <div id="panel" class="panel panel-primary">
    <div class="panel-heading">
      Slip Day Results
    </div>
    <div class="table-responsive">
      <table border="0" id="results" class="table table-striped table-responsive">
        <thead>
          <tr>
            <th width="60%">Assignment Name</th>
            <th width="10%">Slip Days Used</th>
            <th width="10%">View Assignment</th>
            <th width="20%">Verified By Reader</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <td colspan="4">
              <em>Verified</em> means a reader has checked the slip days and you can count on that number. Otherwise, the counter could change, and you should use this as an estimation only. Please let your TA know if any of these numbers are wrong.
            </td>
          </tr>
        </tfoot>
        <tbody id="table-contents">
        </tbody>
      </table>
    </div>
  </div>
</div>

<style type="text/css">
.good {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAltJREFUSA3tVL9PFFEQnr3Di9y5BBIKAgkNjbWNhRSXkNjbEwrD32Ar0PMfKAUJrX8ACUYTKWysbWggGkmOwO3Pt+zdPuYbbo536565oMbGucz7NTPfNzPv3RL9l3/dAe9PJPDy8Nlibcr7VvTs0t7z4+8uZs3d3Get4CuPVwgk2Ls4v0Xggmd5RvPL8z+R3JugDG5yI4kriVYxpQudNbCqn2UftMVcGwK4591eZ+e0Q2RpW31HKlDwcf1EkOuTZimlJiVrraiCv1n7tAVfyJBAA2cXZikxCVWRqA9sSZpQnMRUFAXZwtLF2YVk7oKDYPhMN9+vWoBLNhzQnG5Sq9mik68nhHZJNvxKAB7HsYB7NY+g3fNuJbjEYBDhvl39uJJskFUYhhRF0bASPEGAR2FEQRhI5vD7FThwhxVgs3m0usUnr1tzLSFC6b7vkz/jw0xBEFAYhHKhyDzpJmMzlwAe6rrA/GX/9MOTjWUvN3m73qgLiUn5hfDPGEPBZSAthK8J+Vly1eWew+bKSAVq0Eoa043bSviVqOA55lk+EThiRipQEK2k3+u30QrOVIhg7+W9icHhX0kAg5LwPbSxBwkudZK2iP9gGEsAO5N85DvBso2B/047b9eOd3iJ1qrCVNnqsgFO+OPh8/FgMCOB2vq7p68s3/TBi8+7vFfBxUC5LNE+z9w/4guSGeccdicAb7A+YsW7fMgKIpAIEc+atQsOYCiAU9ZooNc8F+WPHVjhiE8jQLAuE/CRiGavBMg+Y0UMcETcCnCgbUI1UN1r5vBxxa0Ea5ApMea/LzcsIEQubh6TAQAAAABJRU5ErkJggg==');
}
.bad {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAABJtJREFUOBG1lUtsE1cUhs88TOzmRUPs2M7DUcSChLwdFFUmYgGiaiGUgEpRsgCllIKoWqnsyqZZdEvViqoNiapKFaVqaVQ5CdBgKBsWQAIFUqgQ5IHlR+w4wTHxjO2ZuT1n6FgOpFI3Hen43pk597v/PY8xwP99/QQgnAHo/9FsXvgB4MR/3Q/XfHaG4xZxzWlirFj3O4CIDr/63G55tq+PeV0uCe9PrnBa5QZ9Tg2tW5d80NnJvKWlSWIQi1z1HV4HGChzu/ds3L8/DxYXwdneLsamp1s64/HSXwB+W4UJBH2ltLS3Zft2C0QiYKutNSViMdd8MukaAvDytIgvLHxnQ3d3nrawAOrcHDB0bDt40Fzkch1BwBcvggmab7P1tu7caVEfP4YMmhoMQk1bm4UXhD06k35YInHqwdmzKdFqBbGkBFg8DqSi7cAB81qX6zDG70sDTtBCu723ravLwmZmgMViYHI6QaishL+uX5c1VdWF6KHA4/reCAYdS5FIo9PjEbl0GhiGhM9koBzvYzMzTTvicfvbADsKKyp6N+3da2FTU6CGwyDYbCDW1MBtn0+WFxa+7gH4hERks4jw82+Gw454JNJQvnmzyMkysKdPc+GNecXFre379lkAlWoYMhGhfHU13Bobk+Vo9BuEfmycjDMmxojH/qqkvr7X3dNjhidPgOIuFBWBYLcDqCqoCFUCAYDiYtAcDhj3euVEKHQaoR8ZDBqzio2HuvJIxLkYCjWWd3SIQioFVCmcogCHsddCIeAtFmCYjxsjI/JyODzwInRVMD3U4dGofTEQaKraskXkCI7JpLgCx4GAybo2OipLkchgN8CHhqjcUS/m3AfGHOuQKcvLDFApW14G7eFD/XgM1RKcY4xhHPVyNdbkji+Fgl5SeRVWVb332qFDZuXOHVDGx0GoqADIywMFQ8Gwapxut2kuEKjvlKQKbIjRXCjNXwJTQxRYrYc37d5tVm/eBOXePb1GeaxTjmocoRlKHp7E0dJiigaDG3fJciWGbyQXvgKMSj8vsNneb+7oMCsIVf1+EF0uAFR77eJFyf/okeJsbTURNIPvKKGO5mbTfDBYtyuVqkb4sAHPglHpyXyr9WiTx2NWJidBm58HsaoKOLQbly5Jcjz+bUaSboX9/gaCc1h66dlZ4DQN7AiPhkJ1byH8HCrvM0KBSk8g9Hh9e7tZuXtXh5oQSMU/cflyMrm09B1m/wNUdAEXl0X8/kZSSk2Qmp4GIHhDgykWCtX+kU6/in5jz7PK88fXNzWZ6ehp7Cg9URiCiStXDOgx44hUXslEYmDc55M0LDsRN0/hR0jD9t7g8ViYIBwhXx3MNG1oamJC5jGWa+rqgEPo7atXJem50izUgFNDyM+e9ePGkoodaaqtBa6sDGbu35ewO382/OCfD/3wsM0m/bltGxsqKEhSa2cd/mVCeTlnsSQnt25l5ysr6UM/bHzoKUz69SnAmhqAQYHnu2RNG3wX/3LwhQmNEkxGpyN/hqahqWT9GPt8jjuK/eL9HuDYGECSfLJgvKE5LaZuJCNorhGcfHQgjpkcU3BuGG0KfwN/3QP6oaQZ+wAAAABJRU5ErkJggg==');
}
.good, .bad {
  content: ' ';
  background-repeat: no-repeat;
  background-position: center;
}
</style>

<!--
This makes a call to the slip day tracker
The API format is entirely custom but pretty simple. View it here:
https://github.com/cs10/Alonzo/blob/master/scripts/cs10-slipdays.js#L128-L175
 -->
<script type="text/javascript">
var buildTable = function(result, xhr, other) {
    var table = $('#table-contents'),
        msg   = $('#msg'),
        panel = $('#panel');

    // Reset the view
    table.html('');
    msg.html('');
    msg.removeClass('hidden alert-danger alert-success alert-warning');
    panel.removeClass('panel-danger panel-success panel-warning');

    if (result.errors) {
      msg.addClass('alert-danger');
      result.errors.forEach(function(error, idx) {
        if (!idx) {
          msg.append($('<strong>').html(error));
          msg.append($('<ul>'));
          msg = $('#msg>ul');
        } else {
          msg.append($('<li>').html(error));
        }
      });
    }
    
    // Exit if the data we need doesn't exist.
    // Must check for undefined and not just ! b/c data could be '0'
    // Note that we can have both errors and good data!
    if (result.daysRemaining == undefined || 
        result.assignments == undefined ||
        result.totalDays == undefined) {
        return;
      }
    // Add any warning messages
    var days = result.daysRemaining;
    var notice = '', bsClass = '';
    if (days > 0) {
        bsClass = 'success';
        notice = 'Good work! You\'ve got some breathing room!';
    } else if (days === 0) {
        bsClass = 'warning';
        notice = 'You\'re at the limit of slip days! Be careful, or you\'ll lose points.';
    } else {
        bsClass = 'danger';
        notice = 'Uh-oh! We\'ll need to dock some points.';
    }
    panel.addClass('panel-' + bsClass);
    msg.addClass('alert-' + bsClass);
    msg.append($('<strong>').html(notice));
    msg.append('<br>');
    msg.append('You have used ' + result.totalDays + ' slip days and have ' +
              days + ' slip days remaining.');

    result.assignments.forEach(function(item) {
        var row  = $('<tr>');
        var link = $('<a>').attr({
          'href':item.url.replace('?preview=1', ''), 'target':'_blank' }).html('View Submission');
        link = link[0].outerHTML;
        var good = item.verified ? 'good' : 'bad';
        var cells  = '<td>' + item.title + '</td>';
            cells += '<td>' + item.slipDays + '</td>';
            cells += '<td>' + link + '</td>';
            cells += '<td class="' + good + '"><span class="sr-only">' + item.verified + '</span></td>';
        row.append(cells);
        table.append(row);
      });
};

var makeSlipDaysCall = function(sid) {
  var dom = 'alonzo.herokuapp.com';
  // Local hosts use a local Alonzo URL
  if (location.port === '4000') {
    dom = 'localhost:8080';
  }

  var url = 'https://' + dom + '/slipdays/' + sid;
  $.ajax({
    url: url,
    cache: true,
    crossDomain: true,
    success: buildTable,
    error: function(a, b, c) { // TODO: Better error handling..
      var table = $('#table-contents');
      table.append($('<tr>').html($('<td>').html('Whoops, an error occured! Sorry!')));
    }
  });
}

$(document).ready(function() {
  var search = location.search.split('?');

  if (search.length > 1 && search[1]) {
    makeSlipDaysCall(search[1]);
  }

  $('#sid-form').submit(function(evt) {
    makeSlipDaysCall($('#sidInput').val());
    evt.preventDefault();
  });
});

</script>


    <footer class="site-footer">
  <div class="wrapper">
    <hr />
    <div class="center">
      This work is licensed under a
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
        Creative Commons Attribution-Noncommercial-Share Alike 4.0 Unported License</a>.
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
        <img align="right" alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" />
      </a>
    </div>
  </div>
</footer>


  </body>

</html>
